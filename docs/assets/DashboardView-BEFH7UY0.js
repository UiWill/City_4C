import{d as M,u as O,r as c,o as S,c as e,b as s,t as l,f as _,w as r,g as q,F as f,A as g,B as D,p,q as R,e as A,C as h,h as y,n as N,D as k,x as H,l as o,_ as E}from"./index-CSfAbG_0.js";import{f as P,p as $}from"./pt-BR-BZBxiJ23.js";const F={class:"dashboard"},T={class:"stats-grid"},j={class:"stat-card stat-card--primary"},G={class:"stat-card__content"},I={class:"stat-card stat-card--warning"},J={class:"stat-card__content"},K={class:"stat-card stat-card--info"},Q={class:"stat-card__content"},U={class:"stat-card stat-card--success"},W={class:"stat-card__content"},X={class:"dashboard-content"},Y={class:"dashboard-column"},Z={class:"dashboard-card"},ss={class:"card-header"},ts={key:0,class:"loading-state"},as={key:1,class:"empty-state"},os={key:2,class:"occurrence-list"},es=["onClick"],ls={class:"status-text"},ds={class:"occurrence-item__content"},is={class:"occurrence-meta"},ns={class:"date"},cs={key:0,class:"address"},rs={class:"occurrence-item__actions"},us=["title"],vs={class:"dashboard-card"},_s={class:"quick-actions"},ps={class:"dashboard-column"},ms={class:"dashboard-card"},fs={key:0,class:"tags-chart"},gs={class:"tag-info"},hs={class:"tag-name"},ys={class:"tag-count"},ks={key:1,class:"empty-state"},Ls=M({__name:"DashboardView",setup(Cs){const L=H(),{profile:C}=O(),i=c(null),u=c([]),m=c(!1),v=c(!1),b=async()=>{await Promise.all([w(),z()])},w=async()=>{m.value=!0;try{i.value=await h.getDashboardStats()}catch(d){console.error("Error loading stats:",d)}finally{m.value=!1}},z=async()=>{v.value=!0;try{u.value=await h.getOccurrences({limit:5})}catch(d){console.error("Error loading occurrences:",d)}finally{v.value=!1}},V=d=>{L.push(`/occurrences/${d}`)},x=d=>P(new Date(d),"dd/MM/yyyy HH:mm",{locale:$}),B=d=>({pending:"Pendente",in_progress:"Em Andamento",resolved:"Resolvido",rejected:"Rejeitado"})[d]||d;return S(()=>{b()}),(d,t)=>{const n=q("RouterLink");return o(),e("div",F,[s("div",T,[s("div",j,[t[1]||(t[1]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),s("div",G,[s("h3",null,l(i.value?.total_occurrences||0),1),t[0]||(t[0]=s("p",null,"Total de Ocorrências",-1))])]),s("div",I,[t[3]||(t[3]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})])],-1)),s("div",J,[s("h3",null,l(i.value?.pending_occurrences||0),1),t[2]||(t[2]=s("p",null,"Pendentes",-1))])]),s("div",K,[t[5]||(t[5]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})])],-1)),s("div",Q,[s("h3",null,l(i.value?.in_progress_occurrences||0),1),t[4]||(t[4]=s("p",null,"Em Andamento",-1))])]),s("div",U,[t[7]||(t[7]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})])],-1)),s("div",W,[s("h3",null,l(i.value?.resolved_occurrences||0),1),t[6]||(t[6]=s("p",null,"Resolvidas",-1))])])]),s("div",X,[s("div",Y,[s("div",Z,[s("div",ss,[t[9]||(t[9]=s("h2",null,"Ocorrências Recentes",-1)),_(n,{to:"/occurrences",class:"view-all-link"},{default:r(()=>t[8]||(t[8]=[y(" Ver todas ",-1)])),_:1,__:[8]})]),v.value?(o(),e("div",ts,t[10]||(t[10]=[s("div",{class:"spinner"},null,-1),s("p",null,"Carregando ocorrências...",-1)]))):u.value.length===0?(o(),e("div",as,t[11]||(t[11]=[s("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1),s("p",null,"Nenhuma ocorrência encontrada",-1)]))):(o(),e("div",os,[(o(!0),e(f,null,g(u.value,a=>(o(),e("div",{key:a.id,class:"occurrence-item",onClick:bs=>V(a.id)},[s("div",{class:N(["occurrence-item__status",`status--${a.status.replace("_","-")}`])},[t[12]||(t[12]=s("div",{class:"status-dot"},null,-1)),s("span",ls,l(B(a.status)),1)],2),s("div",ds,[s("h4",null,l(a.title||"Ocorrência sem título"),1),s("div",is,[a.tags?(o(),e("span",{key:0,class:"tag",style:k({backgroundColor:a.tags.color+"20",color:a.tags.color})},l(a.tags.name),5)):p("",!0),s("span",ns,l(x(a.created_at)),1)]),a.address?(o(),e("p",cs,l(a.address),1)):p("",!0)]),s("div",rs,[s("button",{class:"action-button",title:`Prioridade ${a.priority}`},[t[13]||(t[13]=s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)),y(" "+l(a.priority),1)],8,us)])],8,es))),128))]))]),s("div",vs,[t[17]||(t[17]=s("h2",null,"Ações Rápidas",-1)),s("div",_s,[_(n,{to:"/occurrences",class:"quick-action"},{default:r(()=>t[14]||(t[14]=[s("div",{class:"quick-action__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1),s("div",{class:"quick-action__content"},[s("h3",null,"Gerenciar Ocorrências"),s("p",null,"Visualizar e atualizar status das ocorrências")],-1)])),_:1,__:[14]}),_(n,{to:"/map",class:"quick-action"},{default:r(()=>t[15]||(t[15]=[s("div",{class:"quick-action__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5z"})])],-1),s("div",{class:"quick-action__content"},[s("h3",null,"Ver no Mapa"),s("p",null,"Visualizar ocorrências georreferenciadas")],-1)])),_:1,__:[15]}),R(C)?.role==="admin"?(o(),D(n,{key:0,to:"/tags",class:"quick-action"},{default:r(()=>t[16]||(t[16]=[s("div",{class:"quick-action__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 2 2 2h11c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"})])],-1),s("div",{class:"quick-action__content"},[s("h3",null,"Gerenciar Categorias"),s("p",null,"Adicionar e editar tags das ocorrências")],-1)])),_:1,__:[16]})):p("",!0)])])]),s("div",ps,[s("div",ms,[t[19]||(t[19]=s("h2",null,"Ocorrências por Categoria",-1)),i.value?.by_tag&&i.value.by_tag.length>0?(o(),e("div",fs,[(o(!0),e(f,null,g(i.value.by_tag,a=>(o(),e("div",{key:a.tag_name,class:"tag-item"},[s("div",gs,[s("div",{class:"tag-color",style:k({backgroundColor:a.color})},null,4),s("span",hs,l(a.tag_name),1)]),s("div",ys,l(a.count),1)]))),128))])):(o(),e("div",ks,t[18]||(t[18]=[s("p",null,"Nenhum dado disponível",-1)])))]),t[20]||(t[20]=A('<div class="dashboard-card" data-v-ae96cdf3><h2 data-v-ae96cdf3>Status do Sistema</h2><div class="system-status" data-v-ae96cdf3><div class="status-item status-item--online" data-v-ae96cdf3><div class="status-dot" data-v-ae96cdf3></div><div class="status-info" data-v-ae96cdf3><h4 data-v-ae96cdf3>Base de Dados</h4><p data-v-ae96cdf3>Online e funcionando</p></div></div><div class="status-item status-item--online" data-v-ae96cdf3><div class="status-dot" data-v-ae96cdf3></div><div class="status-info" data-v-ae96cdf3><h4 data-v-ae96cdf3>Storage de Vídeos</h4><p data-v-ae96cdf3>Operacional</p></div></div><div class="status-item status-item--warning" data-v-ae96cdf3><div class="status-dot" data-v-ae96cdf3></div><div class="status-info" data-v-ae96cdf3><h4 data-v-ae96cdf3>Versão MVP</h4><p data-v-ae96cdf3>Funcionalidades limitadas</p></div></div></div></div>',1))])])])}}}),Vs=E(Ls,[["__scopeId","data-v-ae96cdf3"]]);export{Vs as default};
