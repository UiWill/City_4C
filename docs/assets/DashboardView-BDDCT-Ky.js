import{d as x,u as M,a as d,y as O,c as l,b as s,t as i,k as _,l as r,m as S,F as m,z as h,A as q,f,h as D,e as R,B as g,j as y,n as N,C as k,o as A,p as o,_ as H}from"./index-DjO_doMe.js";import{f as E,p as P}from"./pt-BR-BZBxiJ23.js";const $={class:"dashboard"},F={class:"stats-grid"},T={class:"stat-card stat-card--primary"},G={class:"stat-card__content"},j={class:"stat-card stat-card--warning"},I={class:"stat-card__content"},J={class:"stat-card stat-card--info"},K={class:"stat-card__content"},Q={class:"stat-card stat-card--success"},U={class:"stat-card__content"},W={class:"dashboard-content"},X={class:"dashboard-column"},Y={class:"dashboard-card"},Z={class:"card-header"},ss={key:0,class:"loading-state"},ts={key:1,class:"empty-state"},as={key:2,class:"occurrence-list"},os=["onClick"],ls={class:"occurrence-item__content"},is={class:"occurrence-meta"},es={class:"date"},cs={key:0,class:"address"},ns={class:"occurrence-item__actions"},ds=["title"],rs={class:"dashboard-card"},us={class:"quick-actions"},vs={class:"dashboard-column"},_s={class:"dashboard-card"},fs={key:0,class:"tags-chart"},ps={class:"tag-info"},ms={class:"tag-name"},hs={class:"tag-count"},gs={key:1,class:"empty-state"},ys=x({__name:"DashboardView",setup(ks){const L=A(),{profile:C}=M(),e=d(null),u=d([]),p=d(!1),v=d(!1),b=async()=>{await Promise.all([w(),z()])},w=async()=>{p.value=!0;try{e.value=await g.getDashboardStats()}catch(c){console.error("Error loading stats:",c)}finally{p.value=!1}},z=async()=>{v.value=!0;try{u.value=await g.getOccurrences({limit:5})}catch(c){console.error("Error loading occurrences:",c)}finally{v.value=!1}},V=c=>{L.push(`/occurrences/${c}`)},B=c=>E(new Date(c),"dd/MM/yyyy HH:mm",{locale:P});return O(()=>{b()}),(c,t)=>{const n=S("RouterLink");return o(),l("div",$,[s("div",F,[s("div",T,[t[1]||(t[1]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1)),s("div",G,[s("h3",null,i(e.value?.total_occurrences||0),1),t[0]||(t[0]=s("p",null,"Total de Ocorrências",-1))])]),s("div",j,[t[3]||(t[3]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})])],-1)),s("div",I,[s("h3",null,i(e.value?.pending_occurrences||0),1),t[2]||(t[2]=s("p",null,"Pendentes",-1))])]),s("div",J,[t[5]||(t[5]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})])],-1)),s("div",K,[s("h3",null,i(e.value?.in_progress_occurrences||0),1),t[4]||(t[4]=s("p",null,"Em Andamento",-1))])]),s("div",Q,[t[7]||(t[7]=s("div",{class:"stat-card__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"})])],-1)),s("div",U,[s("h3",null,i(e.value?.resolved_occurrences||0),1),t[6]||(t[6]=s("p",null,"Resolvidas",-1))])])]),s("div",W,[s("div",X,[s("div",Y,[s("div",Z,[t[9]||(t[9]=s("h2",null,"Ocorrências Recentes",-1)),_(n,{to:"/occurrences",class:"view-all-link"},{default:r(()=>t[8]||(t[8]=[y(" Ver todas ",-1)])),_:1,__:[8]})]),v.value?(o(),l("div",ss,t[10]||(t[10]=[s("div",{class:"spinner"},null,-1),s("p",null,"Carregando ocorrências...",-1)]))):u.value.length===0?(o(),l("div",ts,t[11]||(t[11]=[s("svg",{class:"empty-icon",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1),s("p",null,"Nenhuma ocorrência encontrada",-1)]))):(o(),l("div",as,[(o(!0),l(m,null,h(u.value,a=>(o(),l("div",{key:a.id,class:"occurrence-item",onClick:Ls=>V(a.id)},[s("div",{class:N(["occurrence-item__status",`status--${a.status.replace("_","-")}`])},t[12]||(t[12]=[s("div",{class:"status-dot"},null,-1)]),2),s("div",ls,[s("h4",null,i(a.title||"Ocorrência sem título"),1),s("div",is,[a.tags?(o(),l("span",{key:0,class:"tag",style:k({backgroundColor:a.tags.color+"20",color:a.tags.color})},i(a.tags.name),5)):f("",!0),s("span",es,i(B(a.created_at)),1)]),a.address?(o(),l("p",cs,i(a.address),1)):f("",!0)]),s("div",ns,[s("button",{class:"action-button",title:`Prioridade ${a.priority}`},[t[13]||(t[13]=s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1)),y(" "+i(a.priority),1)],8,ds)])],8,os))),128))]))]),s("div",rs,[t[17]||(t[17]=s("h2",null,"Ações Rápidas",-1)),s("div",us,[_(n,{to:"/occurrences",class:"quick-action"},{default:r(()=>t[14]||(t[14]=[s("div",{class:"quick-action__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})])],-1),s("div",{class:"quick-action__content"},[s("h3",null,"Gerenciar Ocorrências"),s("p",null,"Visualizar e atualizar status das ocorrências")],-1)])),_:1,__:[14]}),_(n,{to:"/map",class:"quick-action"},{default:r(()=>t[15]||(t[15]=[s("div",{class:"quick-action__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M20.5 3l-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5z"})])],-1),s("div",{class:"quick-action__content"},[s("h3",null,"Ver no Mapa"),s("p",null,"Visualizar ocorrências georreferenciadas")],-1)])),_:1,__:[15]}),D(C)?.role==="admin"?(o(),q(n,{key:0,to:"/tags",class:"quick-action"},{default:r(()=>t[16]||(t[16]=[s("div",{class:"quick-action__icon"},[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M17.63 5.84C17.27 5.33 16.67 5 16 5L5 5.01C3.9 5.01 3 5.9 3 7v10c0 1.1.9 2 2 2h11c.67 0 1.27-.33 1.63-.84L22 12l-4.37-6.16z"})])],-1),s("div",{class:"quick-action__content"},[s("h3",null,"Gerenciar Categorias"),s("p",null,"Adicionar e editar tags das ocorrências")],-1)])),_:1,__:[16]})):f("",!0)])])]),s("div",vs,[s("div",_s,[t[19]||(t[19]=s("h2",null,"Ocorrências por Categoria",-1)),e.value?.by_tag&&e.value.by_tag.length>0?(o(),l("div",fs,[(o(!0),l(m,null,h(e.value.by_tag,a=>(o(),l("div",{key:a.tag_name,class:"tag-item"},[s("div",ps,[s("div",{class:"tag-color",style:k({backgroundColor:a.color})},null,4),s("span",ms,i(a.tag_name),1)]),s("div",hs,i(a.count),1)]))),128))])):(o(),l("div",gs,t[18]||(t[18]=[s("p",null,"Nenhum dado disponível",-1)])))]),t[20]||(t[20]=R('<div class="dashboard-card" data-v-c07fcf4a><h2 data-v-c07fcf4a>Status do Sistema</h2><div class="system-status" data-v-c07fcf4a><div class="status-item status-item--online" data-v-c07fcf4a><div class="status-dot" data-v-c07fcf4a></div><div class="status-info" data-v-c07fcf4a><h4 data-v-c07fcf4a>Base de Dados</h4><p data-v-c07fcf4a>Online e funcionando</p></div></div><div class="status-item status-item--online" data-v-c07fcf4a><div class="status-dot" data-v-c07fcf4a></div><div class="status-info" data-v-c07fcf4a><h4 data-v-c07fcf4a>Storage de Vídeos</h4><p data-v-c07fcf4a>Operacional</p></div></div><div class="status-item status-item--warning" data-v-c07fcf4a><div class="status-dot" data-v-c07fcf4a></div><div class="status-info" data-v-c07fcf4a><h4 data-v-c07fcf4a>Versão MVP</h4><p data-v-c07fcf4a>Funcionalidades limitadas</p></div></div></div></div>',1))])])])}}}),ws=H(ys,[["__scopeId","data-v-c07fcf4a"]]);export{ws as default};
