import{d as D,a as d,q as x,y as B,c as l,e as A,f as r,b as s,t as o,g as C,s as y,F,z as I,n as _,w as N,B as L,j as k,p as n,_ as $}from"./index-DjO_doMe.js";import{f as E,p as H}from"./pt-BR-BZBxiJ23.js";const P={class:"agents-view"},T={key:0,class:"loading-state"},R={key:1,class:"agents-list"},U={class:"list-header"},O={class:"list-filters"},j={class:"agents-grid"},q={class:"agent-header"},G={class:"agent-avatar"},J={class:"agent-info"},K={class:"agent-id"},Q={class:"agent-status"},W={class:"agent-details"},X={class:"detail-row"},Y={class:"value"},Z={key:0,class:"detail-row"},ss={class:"value"},ts={key:1,class:"detail-row"},es={class:"value"},as={class:"detail-row"},os={class:"value"},is={class:"detail-row"},ls={class:"value"},ns={class:"agent-stats"},ds={class:"stat-item"},rs={class:"stat-value"},vs={class:"stat-item"},cs={class:"stat-value"},us={class:"agent-actions"},ps=["onClick"],bs=["onClick","title"],_s={key:0,viewBox:"0 0 24 24",fill:"currentColor"},ms={key:1,viewBox:"0 0 24 24",fill:"currentColor"},gs={key:2,class:"empty-state"},fs={class:"modal-header"},hs={class:"modal-body"},As={class:"agent-profile"},Cs={class:"profile-avatar"},ys={class:"profile-info"},ks={class:"profile-role"},ws={class:"profile-details"},Ms={class:"detail-section"},zs={class:"detail-grid"},Ss={class:"detail-item"},Vs={class:"value"},Ds={key:0,class:"detail-item"},xs={class:"value"},Bs={key:1,class:"detail-item"},Fs={class:"value"},Is={class:"detail-item"},Ns={class:"value"},Ls={class:"detail-section"},$s={class:"stats-grid"},Es={class:"stat-card"},Hs={class:"stat-number"},Ps={class:"stat-card"},Ts={class:"stat-number"},Rs={class:"detail-section"},Us={class:"detail-grid"},Os={class:"detail-item"},js={class:"value"},qs={class:"detail-item"},Gs={class:"value"},Js={class:"modal-actions"},Ks=D({__name:"AgentsView",setup(Qs){const v=d([]),i=d(null),c=d(!1),u=d(""),p=d(""),m=d({}),w=x(()=>{let a=v.value;if(u.value){const t=u.value==="active";a=a.filter(e=>e.is_active===t)}return p.value&&(a=a.filter(t=>t.role===p.value)),a}),M=async()=>{c.value=!0;try{v.value=await L.getAgents(),v.value.forEach(a=>{m.value[a.id]={occurrences:Math.floor(Math.random()*15),reports:Math.floor(Math.random()*8)}})}catch(a){console.error("Error loading agents:",a)}finally{c.value=!1}},g=a=>a?a.split(" ").map(t=>t[0]).join("").substring(0,2).toUpperCase():"?",f=a=>m.value[a]?.occurrences||0,h=a=>m.value[a]?.reports||0,z=a=>{i.value=a},S=async a=>{try{alert(`Funcionalidade em desenvolvimento. Para alterar o status do agente "${a.full_name||a.id}", acesse o painel do Supabase.`)}catch(t){console.error("Error toggling agent status:",t)}},b=a=>E(new Date(a),"dd/MM/yyyy HH:mm",{locale:H});return B(()=>{M()}),(a,t)=>(n(),l("div",P,[t[33]||(t[33]=A('<div class="agents-header" data-v-8b1ecb73><div class="header-content" data-v-8b1ecb73><h1 data-v-8b1ecb73>Gerenciar Agentes</h1><p data-v-8b1ecb73>Visualize e gerencie os agentes públicos que têm acesso ao sistema.</p></div></div><div class="mvp-notice" data-v-8b1ecb73><div class="notice-icon" data-v-8b1ecb73><svg viewBox="0 0 24 24" fill="currentColor" data-v-8b1ecb73><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" data-v-8b1ecb73></path></svg></div><div class="notice-content" data-v-8b1ecb73><h3 data-v-8b1ecb73>Funcionalidade MVP</h3><p data-v-8b1ecb73> Na versão MVP, a criação de novos agentes é feita diretamente no Supabase Auth. Esta interface mostra apenas os agentes existentes para fins de visualização e atribuição de ocorrências. </p><p data-v-8b1ecb73><strong data-v-8b1ecb73>Para criar novos agentes:</strong> Acesse o painel do Supabase → Authentication → Users </p></div></div>',2)),c.value?(n(),l("div",T,t[6]||(t[6]=[s("div",{class:"spinner"},null,-1),s("p",null,"Carregando agentes...",-1)]))):v.value.length>0?(n(),l("div",R,[s("div",U,[s("h2",null,"Agentes Cadastrados ("+o(v.value.length)+")",1),s("div",O,[C(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),class:"form-select"},t[7]||(t[7]=[s("option",{value:""},"Todos os Status",-1),s("option",{value:"active"},"Ativos",-1),s("option",{value:"inactive"},"Inativos",-1)]),512),[[y,u.value]]),C(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),class:"form-select"},t[8]||(t[8]=[s("option",{value:""},"Todas as Funções",-1),s("option",{value:"admin"},"Administradores",-1),s("option",{value:"agent"},"Agentes",-1)]),512),[[y,p.value]])])]),s("div",j,[(n(!0),l(F,null,I(w.value,e=>(n(),l("div",{key:e.id,class:"agent-card"},[s("div",q,[s("div",G,o(g(e.full_name||e.id)),1),s("div",J,[s("h3",null,o(e.full_name||"Nome não definido"),1),s("p",K,"ID: "+o(e.id.substring(0,8))+"...",1)]),s("div",Q,[s("span",{class:_(["status-badge",e.is_active?"status-active":"status-inactive"])},o(e.is_active?"Ativo":"Inativo"),3)])]),s("div",W,[s("div",X,[t[9]||(t[9]=s("span",{class:"label"},"Função:",-1)),s("span",Y,[s("span",{class:_(["role-badge",`role-${e.role}`])},o(e.role==="admin"?"Administrador":"Agente"),3)])]),e.department?(n(),l("div",Z,[t[10]||(t[10]=s("span",{class:"label"},"Departamento:",-1)),s("span",ss,o(e.department),1)])):r("",!0),e.phone?(n(),l("div",ts,[t[11]||(t[11]=s("span",{class:"label"},"Telefone:",-1)),s("span",es,o(e.phone),1)])):r("",!0),s("div",as,[t[12]||(t[12]=s("span",{class:"label"},"Cadastrado em:",-1)),s("span",os,o(b(e.created_at)),1)]),s("div",is,[t[13]||(t[13]=s("span",{class:"label"},"Atualizado em:",-1)),s("span",ls,o(b(e.updated_at)),1)])]),s("div",ns,[s("div",ds,[s("span",rs,o(f(e.id)),1),t[14]||(t[14]=s("span",{class:"stat-label"},"Ocorrências Atribuídas",-1))]),s("div",vs,[s("span",cs,o(h(e.id)),1),t[15]||(t[15]=s("span",{class:"stat-label"},"Relatos Criados",-1))])]),s("div",us,[s("button",{onClick:V=>z(e),class:"action-btn action-btn--view",title:"Ver detalhes do agente"},t[16]||(t[16]=[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})],-1),k(" Ver Detalhes ",-1)]),8,ps),s("button",{onClick:V=>S(e),class:_(["action-btn",e.is_active?"action-btn--deactivate":"action-btn--activate"]),title:e.is_active?"Desativar agente":"Ativar agente"},[e.is_active?(n(),l("svg",_s,t[17]||(t[17]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"},null,-1)]))):(n(),l("svg",ms,t[18]||(t[18]=[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"},null,-1)]))),k(" "+o(e.is_active?"Desativar":"Ativar"),1)],10,bs)])]))),128))])])):c.value?r("",!0):(n(),l("div",gs,t[19]||(t[19]=[A('<svg class="empty-icon" viewBox="0 0 24 24" fill="currentColor" data-v-8b1ecb73><path d="M16 7c0-2.76-2.24-5-5-5S6 4.24 6 7s2.24 5 5 5 5-2.24 5-5zM1 18c0-2.66 5.33-4 10-4s10 1.34 10 4v1H1v-1z" data-v-8b1ecb73></path></svg><h3 data-v-8b1ecb73>Nenhum agente encontrado</h3><p data-v-8b1ecb73>Não há agentes cadastrados no sistema ainda.</p><div class="empty-actions" data-v-8b1ecb73><a href="https://supabase.com/dashboard" target="_blank" class="btn btn-primary" data-v-8b1ecb73><svg viewBox="0 0 24 24" fill="currentColor" data-v-8b1ecb73><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" data-v-8b1ecb73></path></svg> Criar Agente no Supabase </a></div>',4)]))),i.value?(n(),l("div",{key:3,class:"modal-overlay",onClick:t[5]||(t[5]=e=>i.value=null)},[s("div",{class:"modal-content",onClick:t[4]||(t[4]=N(()=>{},["stop"]))},[s("div",fs,[t[21]||(t[21]=s("h2",null,"Detalhes do Agente",-1)),s("button",{onClick:t[2]||(t[2]=e=>i.value=null),class:"close-button"},t[20]||(t[20]=[s("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})],-1)]))]),s("div",hs,[s("div",As,[s("div",Cs,o(g(i.value.full_name||i.value.id)),1),s("div",ys,[s("h3",null,o(i.value.full_name||"Nome não definido"),1),s("p",ks,o(i.value.role==="admin"?"Administrador":"Agente"),1)])]),s("div",ws,[s("div",Ms,[t[26]||(t[26]=s("h4",null,"Informações Pessoais",-1)),s("div",zs,[s("div",Ss,[t[22]||(t[22]=s("span",{class:"label"},"ID do Sistema:",-1)),s("span",Vs,o(i.value.id),1)]),i.value.department?(n(),l("div",Ds,[t[23]||(t[23]=s("span",{class:"label"},"Departamento:",-1)),s("span",xs,o(i.value.department),1)])):r("",!0),i.value.phone?(n(),l("div",Bs,[t[24]||(t[24]=s("span",{class:"label"},"Telefone:",-1)),s("span",Fs,o(i.value.phone),1)])):r("",!0),s("div",Is,[t[25]||(t[25]=s("span",{class:"label"},"Status:",-1)),s("span",Ns,[s("span",{class:_(["status-badge",i.value.is_active?"status-active":"status-inactive"])},o(i.value.is_active?"Ativo":"Inativo"),3)])])])]),s("div",Ls,[t[29]||(t[29]=s("h4",null,"Estatísticas",-1)),s("div",$s,[s("div",Es,[s("div",Hs,o(f(i.value.id)),1),t[27]||(t[27]=s("div",{class:"stat-description"},"Ocorrências Atribuídas",-1))]),s("div",Ps,[s("div",Ts,o(h(i.value.id)),1),t[28]||(t[28]=s("div",{class:"stat-description"},"Relatos Criados",-1))])])]),s("div",Rs,[t[32]||(t[32]=s("h4",null,"Informações do Sistema",-1)),s("div",Us,[s("div",Os,[t[30]||(t[30]=s("span",{class:"label"},"Cadastrado em:",-1)),s("span",js,o(b(i.value.created_at)),1)]),s("div",qs,[t[31]||(t[31]=s("span",{class:"label"},"Última atualização:",-1)),s("span",Gs,o(b(i.value.updated_at)),1)])])])])]),s("div",Js,[s("button",{onClick:t[3]||(t[3]=e=>i.value=null),class:"btn btn-secondary"}," Fechar ")])])])):r("",!0)]))}}),Ys=$(Ks,[["__scopeId","data-v-8b1ecb73"]]);export{Ys as default};
